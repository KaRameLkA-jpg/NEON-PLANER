<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.cdnfonts.com/css/graphik" rel="stylesheet">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        body {
            font-family: 'Graphik', sans-serif;
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #5ffc3f;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        .tab-active {
            border-top: 3px solid #5ffc3f;
            color: #5ffc3f;
        }
        .casino-chip {
            animation: float 3s ease-in-out infinite;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        .task-completed {
            text-decoration: line-through;
            color: #888;
        }
        .neon-text {
            text-shadow: 0 0 5px #5ffc3f, 0 0 10px #5ffc3f;
        }
        .pink-glow {
            box-shadow: 0 0 10px #ffc0cb;
        }
        .btn-primary {
            background: linear-gradient(45deg, #5ffc3f, #4ce0d2);
            color: #080a00;
            font-weight: bold;
            transition: all 0.3s;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(95, 252, 63, 0.4);
        }
        .btn-pink {
            background: linear-gradient(45deg, #ffc0cb, #ff9a9e);
            color: #080a00;
            font-weight: bold;
            transition: all 0.3s;
        }
        .btn-pink:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 192, 203, 0.4);
        }
        .day-active {
            background: #5ffc3f;
            color: #080a00;
            transform: scale(1.1);
            box-shadow: 0 0 10px #5ffc3f;
        }
        .emoji-scale:hover {
            transform: scale(1.2);
            transition: transform 0.2s;
        }
        .schedule-item {
            border-left: 4px solid #5ffc3f;
            transition: all 0.3s;
        }
        .schedule-item:hover {
            transform: translateX(5px);
        }
        .todo-item {
            border-left: 4px solid #ffc0cb;
            transition: all 0.3s;
        }
        .todo-item:hover {
            transform: translateX(5px);
        }
        .slot-machine {
            background: rgba(0,0,0,0.1);
            border-radius: 10px;
            padding: 10px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }
        .slot {
            background: white;
            border-radius: 5px;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
        }
        .card {
            width: 80px;
            height: 120px;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card.red {
            color: #ff0000;
        }
        .card.black {
            color: #000000;
        }
        .card-back {
            background: linear-gradient(45deg, #5ffc3f, #ffc0cb);
            color: white;
        }
        .dice {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .dice:hover {
            transform: scale(1.1);
        }
        .shake {
            animation: shake 0.5s;
        }
        .game-tab-active {
            background: #5ffc3f;
            color: #080a00;
        }
        .link-item {
            transition: all 0.3s;
            border-left: 3px solid #ffc0cb;
            word-break: break-all;
        }
        .link-item:hover {
            transform: translateX(5px);
        }
        .bottom-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
        }
        .bottom-panel i {
            color: #5ffc3f;
            text-shadow: 0 0 5px #5ffc3f;
        }
    </style>
</head>
<body class="bg-[#fafafa] text-[#080a00] font-sans">
<!-- Loading Screen -->
<div id="loading-screen" class="fixed inset-0 bg-[#080a00] flex flex-col items-center justify-center z-50">
    <div class="loading-spinner mb-6"></div>
    <h1 class="text-4xl font-bold text-[#5ffc3f] mb-2 neon-text">NEON PLANNER</h1>
    <p class="text-[#ffc0cb] text-lg">getting things done in style</p>
    <div class="mt-6 flex space-x-4">
        <div class="w-4 h-4 rounded-full bg-[#5ffc3f] animate-pulse"></div>
        <div class="w-4 h-4 rounded-full bg-[#ffc0cb] animate-pulse" style="animation-delay: 0.2s"></div>
        <div class="w-4 h-4 rounded-full bg-[#5ffc3f] animate-pulse" style="animation-delay: 0.4s"></div>
    </div>
</div>

<!-- Main App Container -->
<div id="app" class="max-w-md mx-auto h-screen flex flex-col hidden">
    <!-- Header -->
    <header class="bg-gradient-to-r from-[#080a00] to-[#1a1d00] text-[#fafafa] p-4 shadow-lg">
        <h1 id="header-title" class="text-xl font-bold text-center text-[#5ffc3f]">Weekly Planner</h1>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto p-4 bg-gradient-to-b from-[#fafafa] to-[#f0f0f0]">
        <!-- Calendar View (Tab 1) -->
        <div id="tab1-content" class="fade-in">
            <div class="flex justify-between items-center mb-6">
                <button id="prev-week" class="btn-primary px-4 py-2 rounded-full">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <h2 id="current-week" class="font-bold text-lg text-[#080a00] bg-[#ffc0cb] px-4 py-1 rounded-full pink-glow"></h2>
                <button id="next-week" class="btn-primary px-4 py-2 rounded-full">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <div id="week-days" class="grid grid-cols-7 gap-2 mb-6">
                <!-- Days will be populated by JavaScript -->
            </div>
            <div class="bg-white p-4 rounded-xl shadow-lg border border-[#ffc0cb] mb-6">
                <h3 class="font-semibold mb-3 text-[#080a00] flex items-center">
                    <i class="fas fa-plus-circle mr-2 text-[#5ffc3f]"></i> Add New Schedule
                </h3>
                <div class="flex space-x-2">
                    <input id="schedule-time" type="time" class="border-2 border-[#ffc0cb] rounded-lg p-2 flex-1 focus:outline-none focus:ring-2 focus:ring-[#5ffc3f]">
                    <input id="schedule-subject" type="text" placeholder="Subject" class="border-2 border-[#ffc0cb] rounded-lg p-2 flex-2 focus:outline-none focus:ring-2 focus:ring-[#5ffc3f]">
                    <button id="add-schedule" class="btn-primary px-4 py-2 rounded-lg">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="font-semibold mb-3 text-[#080a00] flex items-center">
                    <i class="fas fa-clock mr-2 text-[#5ffc3f]"></i> Today's Schedule
                </h3>
                <div id="today-schedule" class="space-y-3">
                    <!-- Schedule items will be added here -->
                </div>
            </div>
        </div>

        <!-- To-Do List (Tab 2) -->
        <div id="tab2-content" class="hidden fade-in">
            <h2 class="text-xl font-bold mb-4 text-[#080a00] flex items-center">
                <i class="fas fa-list-check mr-2 text-[#ffc0cb]"></i> Today's To-Do List
            </h2>
            <div class="flex items-center space-x-2 bg-white p-4 rounded-xl shadow-lg border border-[#5ffc3f]">
                <input id="new-todo" type="text" placeholder="Add a new task..." class="border-2 border-[#5ffc3f] rounded-lg p-2 flex-1 focus:outline-none focus:ring-2 focus:ring-[#ffc0cb]">
                <button id="add-todo" class="btn-pink px-4 py-2 rounded-full text-lg">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div id="todo-list" class="space-y-3 mb-6 mt-6">
                <!-- To-do items will be added here -->
            </div>

        </div>

        <!-- Web Link (Tab 3) -->
        <div id="tab3-content" class="hidden fade-in">
            <h2 class="text-xl font-bold mb-4 text-[#080a00] flex items-center">
                <i class="fas fa-link mr-2 text-[#5ffc3f]"></i> Saved Links
            </h2>
            <div class="bg-white p-4 rounded-xl shadow-lg border border-[#5ffc3f] mb-6">
                <h3 class="font-semibold mb-3 text-[#080a00] flex items-center">
                    <i class="fas fa-star mr-2 text-[#ffc0cb]"></i> Quick Links
                </h3>
                <div class="grid grid-cols-2 gap-3">
                    <button class="quick-link-btn" data-link="https://google.com" data-name="Google">
                        <i class="fab fa-google mr-2"></i> Google
                    </button>
                    <button class="quick-link-btn" data-link="https://youtube.com" data-name="YouTube">
                        <i class="fab fa-youtube mr-2"></i> YouTube
                    </button>
                    <button class="quick-link-btn" data-link="https://bars.mpei.ru/bars_web/" data-name="Bars">
                        <i class="fas fa-film mr-2"></i> Bars
                    </button>
                    <button class="quick-link-btn" data-link="https://spotify.com" data-name="Spotify">
                        <i class="fab fa-spotify mr-2"></i> Spotify
                    </button>
                </div>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-lg border border-[#ffc0cb] mb-6">
                <div class="flex flex-wrap items-center space-x-2 mb-4">
                    <input id="web-link" type="url" placeholder="https://example.com" class="border-2 border-[#5ffc3f] rounded-lg p-2 flex-1 focus:outline-none focus:ring-2 focus:ring-[#ffc0cb]">
                    <input id="web-link-name" type="text" placeholder="Link name" class="border-2 border-[#ffc0cb] rounded-lg p-2 w-32 focus:outline-none focus:ring-2 focus:ring-[#5ffc3f]">
                    <button id="save-link" class="btn-primary px-4 py-2 rounded-lg flex-none mt-2">
                        Save
                    </button>
                </div>
                <div id="saved-links" class="space-y-2">
                    <!-- Saved links will be added here -->
                </div>
            </div>
        </div>

        <!-- Casino Game (Tab 4) -->
        <div id="tab4-content" class="hidden fade-in">
            <h2 class="text-xl font-bold mb-4 text-[#080a00] flex items-center">
                <i class="fas fa-coins mr-2 text-[#ffc0cb]"></i> Game Center
            </h2>

            <!-- Game Tabs -->
            <div class="flex mb-4 bg-[#f0f0f0] rounded-lg p-1">
                <button data-game="slots" class="game-tab-btn flex-1 py-2 rounded-lg game-tab-active">
                    <i class="fas fa-slot-machine mr-1"></i> Slots
                </button>
                <button data-game="blackjack" class="game-tab-btn flex-1 py-2 rounded-lg">
                    <i class="fas fa-club mr-1"></i> Blackjack
                </button>
                <button data-game="dice" class="game-tab-btn flex-1 py-2 rounded-lg">
                    <i class="fas fa-dice mr-1"></i> Dice
                </button>
            </div>

            <!-- Balance Panel -->
            <div class="bg-white p-4 rounded-xl shadow-lg border border-[#5ffc3f] mb-6">
                <div class="flex justify-between items-center mb-4">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-full bg-[#ffc0cb] flex items-center justify-center mr-2 casino-chip pink-glow">
                            <span class="text-lg font-bold">$</span>
                        </div>
                        <span id="balance" class="font-bold text-xl">100</span>
                    </div>
                    <div class="text-sm bg-[#5ffc3f] text-[#080a00] px-3 py-1 rounded-full">
                        Daily bonus: <span id="next-bonus">24:00</span>
                    </div>
                </div>

                <!-- Slots Game -->
                <div id="slots-game" class="game-content">
                    <div class="slot-machine mb-4">
                        <div class="grid grid-cols-3 gap-3 p-2">
                            <div id="slot1" class="slot w-full h-16 flex items-center justify-center text-3xl"></div>
                            <div id="slot2" class="slot w-full h-16 flex items-center justify-center text-3xl"></div>
                            <div id="slot3" class="slot w-full h-16 flex items-center justify-center text-3xl"></div>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-2 mb-4">
                        <div class="bg-[#f0f0f0] p-3 rounded-lg text-center emoji-scale">
                            <div class="text-3xl mb-1">🍒</div>
                            <div class="text-xs font-bold text-[#5ffc3f]">x2</div>
                        </div>
                        <div class="bg-[#f0f0f0] p-3 rounded-lg text-center emoji-scale">
                            <div class="text-3xl mb-1">🍋</div>
                            <div class="text-xs font-bold text-[#5ffc3f]">x3</div>
                        </div>
                        <div class="bg-[#f0f0f0] p-3 rounded-lg text-center emoji-scale">
                            <div class="text-3xl mb-1">🍊</div>
                            <div class="text-xs font-bold text-[#5ffc3f]">x4</div>
                        </div>
                        <div class="bg-[#f0f0f0] p-3 rounded-lg text-center emoji-scale">
                            <div class="text-3xl mb-1">⭐</div>
                            <div class="text-xs font-bold text-[#5ffc3f]">x5</div>
                        </div>
                        <div class="bg-[#f0f0f0] p-3 rounded-lg text-center emoji-scale">
                            <div class="text-3xl mb-1">7️⃣</div>
                            <div class="text-xs font-bold text-[#5ffc3f]">x10</div>
                        </div>
                        <div class="bg-[#f0f0f0] p-3 rounded-lg text-center emoji-scale">
                            <div class="text-3xl mb-1">💰</div>
                            <div class="text-xs font-bold text-[#5ffc3f]">x20</div>
                        </div>
                    </div>

                    <div class="flex items-center space-x-2">
                        <input id="bet-amount" type="number" min="1" value="10" class="border-2 border-[#ffc0cb] rounded-lg p-2 w-20 focus:outline-none focus:ring-2 focus:ring-[#5ffc3f]">
                        <button id="spin-btn" class="btn-primary px-4 py-3 rounded-lg flex-1 text-lg font-bold">
                            <i class="fas fa-spinner mr-2"></i> Spin (Cost: 10)
                        </button>
                    </div>

                    <div id="slot-result" class="mt-4 p-4 bg-[#f0f0f0] rounded-lg text-center text-xl hidden">
                        <div class="flex justify-center space-x-4 mb-3">
                            <div id="result-slot1" class="slot w-16 h-16 flex items-center justify-center text-4xl"></div>
                            <div id="result-slot2" class="slot w-16 h-16 flex items-center justify-center text-4xl"></div>
                            <div id="result-slot3" class="slot w-16 h-16 flex items-center justify-center text-4xl"></div>
                        </div>
                        <p id="result-message" class="font-bold"></p>
                    </div>
                </div>

                <!-- Blackjack Game -->
                <div id="blackjack-game" class="game-content hidden">
                    <div class="mb-4">
                        <h3 class="font-semibold mb-2 text-center">Dealer's Hand</h3>
                        <div id="dealer-hand" class="flex justify-center space-x-2 mb-4">
                            <!-- Cards will be added here -->
                        </div>
                        <h3 class="font-semibold mb-2 text-center">Your Hand</h3>
                        <div id="player-hand" class="flex justify-center space-x-2 mb-4">
                            <!-- Cards will be added here -->
                        </div>
                    </div>

                    <div class="flex justify-center space-x-2 mb-4">
                        <button id="hit-btn" class="btn-primary px-4 py-2 rounded-lg">
                            <i class="fas fa-plus mr-1"></i> Hit
                        </button>
                        <button id="stand-btn" class="btn-pink px-4 py-2 rounded-lg">
                            <i class="fas fa-hand-paper mr-1"></i> Stand
                        </button>
                    </div>

                    <div class="flex items-center space-x-2">
                        <input id="blackjack-bet" type="number" min="1" value="10" class="border-2 border-[#5ffc3f] rounded-lg p-2 w-20 focus:outline-none focus:ring-2 focus:ring-[#ffc0cb]">
                        <button id="deal-btn" class="btn-primary px-4 py-3 rounded-lg flex-1 text-lg font-bold">
                            <i class="fas fa-play mr-2"></i> Deal
                        </button>
                    </div>

                    <div id="blackjack-result" class="mt-4 p-4 bg-[#f0f0f0] rounded-lg text-center text-xl hidden">
                        <p id="blackjack-message" class="font-bold"></p>
                    </div>
                </div>

                <!-- Dice Game -->
                <div id="dice-game" class="game-content hidden">
                    <div class="flex justify-center space-x-4 mb-6">
                        <div id="player-dice" class="dice bg-white border-2 border-[#5ffc3f] shadow-lg">?</div>
                        <div id="computer-dice" class="dice bg-white border-2 border-[#ffc0cb] shadow-lg">?</div>
                    </div>

                    <div class="flex items-center space-x-2 mb-4">
                        <input id="dice-bet" type="number" min="1" value="10" class="border-2 border-[#ffc0cb] rounded-lg p-2 w-20 focus:outline-none focus:ring-2 focus:ring-[#5ffc3f]">
                        <button id="roll-dice-btn" class="btn-primary px-4 py-3 rounded-lg flex-1 text-lg font-bold">
                            <i class="fas fa-dice mr-2"></i> Roll Dice
                        </button>
                    </div>

                    <div id="dice-result" class="mt-4 p-4 bg-[#f0f0f0] rounded-lg text-center text-xl hidden">
                        <p id="dice-message" class="font-bold"></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-panel bg-[#080a00] border-t border-[#5ffc3f] flex justify-around p-2">
        <button data-tab="1" class="tab-btn flex flex-col items-center p-2 tab-active text-[#5ffc3f]">
            <i class="fas fa-calendar-week text-xl"></i>
            <span class="text-xs mt-1">Calendar</span>
        </button>
        <button data-tab="2" class="tab-btn flex flex-col items-center p-2 text-[#ffc0cb]">
            <i class="fas fa-tasks text-xl"></i>
            <span class="text-xs mt-1">To-Do</span>
        </button>
        <button data-tab="3" class="tab-btn flex flex-col items-center p-2 text-[#5ffc3f]">
            <i class="fas fa-link text-xl"></i>
            <span class="text-xs mt-1">Links</span>
        </button>
        <button data-tab="4" class="tab-btn flex flex-col items-center p-2 text-[#ffc0cb]">
            <i class="fas fa-gamepad text-xl"></i>
            <span class="text-xs mt-1">Games</span>
        </button>
    </nav>
</div>

<script>
    // Simulate loading
    setTimeout(() => {
        document.getElementById('loading-screen').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');
        initApp();
    }, 2000);

    function initApp() {
        // Initialize variables
        let currentTab = 1;
        let currentDate = new Date();
        let scheduleData = {};
        let todoData = {};
        let savedLinks = JSON.parse(localStorage.getItem('savedLinks')) || [];
        let balance = parseInt(localStorage.getItem('casinoBalance')) || 100;
        let lastBonusDate = localStorage.getItem('lastBonusDate') || '';

        // Casino symbols and multipliers
        const symbols = ['🍒', '🍋', '🍊', '⭐', '7️⃣', '💰'];
        const multipliers = [2, 3, 4, 5, 10, 20];

        // Blackjack card values
        const cardValues = {
            'A': 11, '2': 2, '3': 3, '4': 4, '5': 5,
            '6': 6, '7': 7, '8': 8, '9': 9, '10': 10,
            'J': 10, 'Q': 10, 'K': 10
        };
        const cardSuits = ['♠', '♥', '♦', '♣'];

        // DOM elements
        const tabContents = {
            1: document.getElementById('tab1-content'),
            2: document.getElementById('tab2-content'),
            3: document.getElementById('tab3-content'),
            4: document.getElementById('tab4-content')
        };

        const tabButtons = document.querySelectorAll('.tab-btn');
        const headerTitle = document.getElementById('header-title');

        // Game elements
        const gameContents = {
            'slots': document.getElementById('slots-game'),
            'blackjack': document.getElementById('blackjack-game'),
            'dice': document.getElementById('dice-game')
        };

        const gameTabButtons = document.querySelectorAll('.game-tab-btn');

        // Load saved data
        const savedSchedule = localStorage.getItem('scheduleData');
        if (savedSchedule) scheduleData = JSON.parse(savedSchedule);

        const savedTodo = localStorage.getItem('todoData');
        if (savedTodo) todoData = JSON.parse(savedTodo);

        // Initialize tabs
        function switchTab(tabNumber) {
            // Hide all tab contents
            Object.values(tabContents).forEach(tab => tab.classList.add('hidden'));

            // Show selected tab content
            tabContents[tabNumber].classList.remove('hidden');

            // Update active tab button
            tabButtons.forEach(btn => {
                btn.classList.remove('tab-active', 'text-[#5ffc3f]', 'text-[#ffc0cb]');
                if (parseInt(btn.getAttribute('data-tab')) === tabNumber) {
                    btn.classList.add('tab-active');
                    btn.classList.add(tabNumber % 2 === 0 ? 'text-[#ffc0cb]' : 'text-[#5ffc3f]');
                }
            });

            // Update header title
            const titles = {
                1: 'Weekly Planner',
                2: 'To-Do List',
                3: 'Saved Links',
                4: 'Game Center'
            };
            headerTitle.textContent = titles[tabNumber];

            currentTab = tabNumber;

            // Refresh tab content if needed
            if (tabNumber === 1) {
                renderWeekCalendar();
                renderTodaySchedule();
            } else if (tabNumber === 2) {
                renderTodoList();
            } else if (tabNumber === 3) {
                renderSavedLinks();
            } else if (tabNumber === 4) {
                updateCasinoUI();
            }
        }

        // Switch game tabs in casino
        function switchGameTab(gameName) {
            // Hide all game contents
            Object.values(gameContents).forEach(game => game.classList.add('hidden'));

            // Show selected game content
            gameContents[gameName].classList.remove('hidden');

            // Update active game tab button
            gameTabButtons.forEach(btn => {
                btn.classList.remove('game-tab-active');
                if (btn.getAttribute('data-game') === gameName) {
                    btn.classList.add('game-tab-active');
                }
            });
        }

        // Game tab switching event listeners
        gameTabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const gameName = button.getAttribute('data-game');
                switchGameTab(gameName);
            });
        });

        // Tab switching event listeners
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabNumber = parseInt(button.getAttribute('data-tab'));
                switchTab(tabNumber);
            });
        });

        // Calendar functions
        function renderWeekCalendar() {
            const weekDaysContainer = document.getElementById('week-days');
            weekDaysContainer.innerHTML = '';

            const currentWeekStart = getWeekStart(currentDate);
            document.getElementById('current-week').textContent =
                `Week of ${formatDate(currentWeekStart)}`;

            for (let i = 0; i < 7; i++) {
                const day = new Date(currentWeekStart);
                day.setDate(day.getDate() + i);

                const dayElement = document.createElement('div');
                dayElement.className = 'text-center cursor-pointer transition-all';
                dayElement.addEventListener('click', () => {
                    currentDate = new Date(day);
                    renderTodaySchedule();
                });

                const dayName = document.createElement('div');
                dayName.className = 'text-sm font-semibold';
                dayName.textContent = day.toLocaleDateString('en-US', { weekday: 'short' });

                const dayNumber = document.createElement('div');
                dayNumber.className = `w-10 h-10 rounded-full flex items-center justify-center mx-auto mt-1 transition-all ${
                    isSameDay(day, new Date()) ? 'day-active' : 'hover:bg-[#ffc0cb]'
                }`;
                dayNumber.textContent = day.getDate();

                dayElement.appendChild(dayName);
                dayElement.appendChild(dayNumber);
                weekDaysContainer.appendChild(dayElement);
            }
        }

        function renderTodaySchedule() {
            const todayScheduleContainer = document.getElementById('today-schedule');
            todayScheduleContainer.innerHTML = '';

            const todayKey = formatDateKey(currentDate);
            const todayItems = scheduleData[todayKey] || [];

            if (todayItems.length === 0) {
                todayScheduleContainer.innerHTML = `
                        <div class="text-center py-6 bg-[#f0f0f0] rounded-lg">
                            <i class="fas fa-calendar-plus text-2xl text-[#5ffc3f] mb-2"></i>
                            <p class="text-gray-500">No schedule items for today</p>
                        </div>
                    `;
                return;
            }

            todayItems.sort((a, b) => a.time.localeCompare(b.time)).forEach(item => {
                const scheduleItem = document.createElement('div');
                scheduleItem.className = 'bg-white p-3 rounded-lg shadow flex items-center schedule-item';

                const timeElement = document.createElement('div');
                timeElement.className = 'font-bold mr-3 w-16 text-[#5ffc3f]';
                timeElement.textContent = item.time;

                const subjectElement = document.createElement('div');
                subjectElement.className = 'flex-1';
                subjectElement.textContent = item.subject;

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'text-[#ffc0cb] ml-2 hover:text-red-500';
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                deleteBtn.addEventListener('click', () => {
                    removeScheduleItem(todayKey, item.time, item.subject);
                });

                scheduleItem.appendChild(timeElement);
                scheduleItem.appendChild(subjectElement);
                scheduleItem.appendChild(deleteBtn);
                todayScheduleContainer.appendChild(scheduleItem);
            });
        }

        function removeScheduleItem(dateKey, time, subject) {
            if (scheduleData[dateKey]) {
                scheduleData[dateKey] = scheduleData[dateKey].filter(
                    item => item.time !== time || item.subject !== subject
                );

                if (scheduleData[dateKey].length === 0) {
                    delete scheduleData[dateKey];
                }

                localStorage.setItem('scheduleData', JSON.stringify(scheduleData));
                renderTodaySchedule();
            }
        }

        // Add schedule item
        document.getElementById('add-schedule').addEventListener('click', () => {
            const timeInput = document.getElementById('schedule-time');
            const subjectInput = document.getElementById('schedule-subject');

            if (!timeInput.value || !subjectInput.value) {
                showNotification('Please enter both time and subject', 'error');
                return;
            }

            const todayKey = formatDateKey(currentDate);
            const newItem = {
                time: timeInput.value,
                subject: subjectInput.value
            };

            if (!scheduleData[todayKey]) {
                scheduleData[todayKey] = [];
            }

            scheduleData[todayKey].push(newItem);
            localStorage.setItem('scheduleData', JSON.stringify(scheduleData));

            timeInput.value = '';
            subjectInput.value = '';
            renderTodaySchedule();
            showNotification('Schedule item added!', 'success');
        });

        // Week navigation
        document.getElementById('prev-week').addEventListener('click', () => {
            currentDate.setDate(currentDate.getDate() - 7);
            renderWeekCalendar();
            renderTodaySchedule();
        });

        document.getElementById('next-week').addEventListener('click', () => {
            currentDate.setDate(currentDate.getDate() + 7);
            renderWeekCalendar();
            renderTodaySchedule();
        });

        // To-Do List functions
        function renderTodoList() {
            const todoListContainer = document.getElementById('todo-list');
            todoListContainer.innerHTML = '';

            const todayKey = formatDateKey(new Date());
            const todayTodos = todoData[todayKey] || [];

            if (todayTodos.length === 0) {
                todoListContainer.innerHTML = `
                        <div class="text-center py-6 bg-[#f0f0f0] rounded-lg">
                            <i class="fas fa-check-circle text-2xl text-[#ffc0cb] mb-2"></i>
                            <p class="text-gray-500">No tasks for today</p>
                        </div>
                    `;
                return;
            }

            todayTodos.forEach((todo, index) => {
                const todoItem = document.createElement('div');
                todoItem.className = `bg-white p-3 rounded-lg shadow flex items-center todo-item ${
                    todo.completed ? 'task-completed' : ''
                }`;

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'mr-3 h-5 w-5 accent-[#5ffc3f]';
                checkbox.checked = todo.completed;
                checkbox.addEventListener('change', () => {
                    toggleTodoComplete(todayKey, index);
                });

                const textElement = document.createElement('div');
                textElement.className = 'flex-1';
                textElement.textContent = todo.text;

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'text-[#ffc0cb] ml-2 hover:text-red-500';
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                deleteBtn.addEventListener('click', () => {
                    removeTodoItem(todayKey, index);
                });

                todoItem.appendChild(checkbox);
                todoItem.appendChild(textElement);
                todoItem.appendChild(deleteBtn);
                todoListContainer.appendChild(todoItem);
            });
        }

        function toggleTodoComplete(dateKey, index) {
            if (todoData[dateKey] && todoData[dateKey][index]) {
                todoData[dateKey][index].completed = !todoData[dateKey][index].completed;
                localStorage.setItem('todoData', JSON.stringify(todoData));
                renderTodoList();
            }
        }

        function removeTodoItem(dateKey, index) {
            if (todoData[dateKey] && todoData[dateKey][index]) {
                todoData[dateKey].splice(index, 1);

                if (todoData[dateKey].length === 0) {
                    delete todoData[dateKey];
                }

                localStorage.setItem('todoData', JSON.stringify(todoData));
                renderTodoList();
                showNotification('Task removed!', 'success');
            }
        }

        // Add to-do item
        document.getElementById('add-todo').addEventListener('click', () => {
            const todoInput = document.getElementById('new-todo');

            if (!todoInput.value.trim()) {
                showNotification('Please enter a task', 'error');
                return;
            }

            const todayKey = formatDateKey(new Date());
            const newTodo = {
                text: todoInput.value.trim(),
                completed: false
            };

            if (!todoData[todayKey]) {
                todoData[todayKey] = [];
            }

            todoData[todayKey].push(newTodo);
            localStorage.setItem('todoData', JSON.stringify(todoData));

            todoInput.value = '';
            renderTodoList();
            showNotification('Task added!', 'success');
        });

        // Link Management functions
        function renderSavedLinks() {
            const savedLinksContainer = document.getElementById('saved-links');
            savedLinksContainer.innerHTML = '';

            if (savedLinks.length === 0) {
                savedLinksContainer.innerHTML = `
                        <div class="text-center py-6 bg-[#f0f0f0] rounded-lg">
                            <i class="fas fa-unlink text-2xl text-[#ffc0cb] mb-2"></i>
                            <p class="text-gray-500">No links saved yet</p>
                        </div>
                    `;
                return;
            }

            savedLinks.forEach((link, index) => {
                const linkItem = document.createElement('div');
                linkItem.className = 'bg-white p-3 rounded-lg shadow flex items-center mb-2 link-item';

                const iconElement = document.createElement('div');
                iconElement.className = 'mr-3 text-[#5ffc3f]';
                iconElement.innerHTML = '<i class="fas fa-link"></i>';

                const linkInfo = document.createElement('div');
                linkInfo.className = 'flex-1';

                const nameElement = document.createElement('div');
                nameElement.className = 'font-semibold';
                nameElement.textContent = link.name;

                const urlElement = document.createElement('div');
                urlElement.className = 'text-xs text-gray-500 truncate';
                urlElement.textContent = link.url;

                linkInfo.appendChild(nameElement);
                linkInfo.appendChild(urlElement);

                const openBtn = document.createElement('a');
                openBtn.href = link.url;
                openBtn.target = '_blank';
                openBtn.className = 'btn-primary px-3 py-1 rounded-lg text-sm mr-2';
                openBtn.innerHTML = '<i class="fas fa-external-link-alt"></i>';

                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn-pink px-3 py-1 rounded-lg text-sm';
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                deleteBtn.addEventListener('click', () => {
                    removeLink(index);
                });

                linkItem.appendChild(iconElement);
                linkItem.appendChild(linkInfo);
                linkItem.appendChild(openBtn);
                linkItem.appendChild(deleteBtn);
                savedLinksContainer.appendChild(linkItem);
            });
        }

        function removeLink(index) {
            savedLinks.splice(index, 1);
            localStorage.setItem('savedLinks', JSON.stringify(savedLinks));
            renderSavedLinks();
            showNotification('Link removed!', 'success');
        }

        // Save link
        document.getElementById('save-link').addEventListener('click', () => {
            const linkInput = document.getElementById('web-link');
            const nameInput = document.getElementById('web-link-name');
            const url = linkInput.value.trim();
            const name = nameInput.value.trim();

            if (!url || !name) {
                showNotification('Please enter both URL and name', 'error');
                return;
            }

            if (!isValidUrl(url)) {
                showNotification('Please enter a valid URL', 'error');
                return;
            }

            // Check if link already exists
            const exists = savedLinks.some(link => link.url === url);
            if (exists) {
                showNotification('This link is already saved', 'error');
                return;
            }

            savedLinks.push({ name, url });
            localStorage.setItem('savedLinks', JSON.stringify(savedLinks));

            linkInput.value = '';
            nameInput.value = '';
            renderSavedLinks();
            showNotification('Link saved!', 'success');
        });

        // Quick link buttons
        document.querySelectorAll('.quick-link-btn').forEach(button => {
            button.addEventListener('click', () => {
                const link = button.getAttribute('data-link');
                const name = button.getAttribute('data-name');
                document.getElementById('web-link').value = link;
                document.getElementById('web-link-name').value = name;
            });
        });

        // Casino functions
        function updateCasinoUI() {
            document.getElementById('balance').textContent = balance;
            document.getElementById('user-score').textContent = balance;

            // Check for daily bonus
            const todayKey = formatDateKey(new Date());
            if (lastBonusDate !== todayKey) {
                // It's a new day, add bonus
                balance += 50;
                lastBonusDate = todayKey;
                localStorage.setItem('casinoBalance', balance);
                localStorage.setItem('lastBonusDate', lastBonusDate);

                // Show bonus notification
                const resultMessage = document.getElementById('result-message');
                resultMessage.innerHTML = '<span class="text-[#5ffc3f]">Daily bonus: +50 coins!</span>';
                document.getElementById('slot-result').classList.remove('hidden');

                // Animate the balance
                animateBalanceChange(50);

                setTimeout(() => {
                    document.getElementById('slot-result').classList.add('hidden');
                }, 3000);
            }

            // Update next bonus time
            updateNextBonusTime();
        }

        function updateNextBonusTime() {
            const now = new Date();
            const nextDay = new Date(now);
            nextDay.setDate(nextDay.getDate() + 1);
            nextDay.setHours(0, 0, 0, 0);

            const diffMs = nextDay - now;
            const diffHrs = Math.floor(diffMs / 3600000);
            const diffMins = Math.floor((diffMs % 3600000) / 60000);

            document.getElementById('next-bonus').textContent =
                `${diffHrs.toString().padStart(2, '0')}:${diffMins.toString().padStart(2, '0')}`;
        }

        // Slots game
        document.getElementById('spin-btn').addEventListener('click', () => {
            const betAmount = parseInt(document.getElementById('bet-amount').value) || 10;

            if (betAmount < 1) {
                showNotification('Bet amount must be at least 1', 'error');
                return;
            }

            if (balance < betAmount) {
                showNotification('Not enough coins', 'error');
                return;
            }

            // Deduct bet amount
            balance -= betAmount;
            localStorage.setItem('casinoBalance', balance);
            document.getElementById('balance').textContent = balance;
            document.getElementById('user-score').textContent = balance;

            // Disable button during spin
            const spinBtn = document.getElementById('spin-btn');
            spinBtn.disabled = true;
            spinBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Spinning...';

            // Show spinning animation
            const slotResult = document.getElementById('slot-result');
            slotResult.classList.remove('hidden');

            const slots = [
                document.getElementById('slot1'),
                document.getElementById('slot2'),
                document.getElementById('slot3')
            ];

            const resultSlots = [
                document.getElementById('result-slot1'),
                document.getElementById('result-slot2'),
                document.getElementById('result-slot3')
            ];

            // Spin animation
            let spins = 0;
            const maxSpins = 15;
            const spinInterval = setInterval(() => {
                slots.forEach((slot, index) => {
                    const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                    slot.textContent = randomSymbol;

                    // Show in result slots after certain spins
                    if (spins > maxSpins - 3 && index === 0) {
                        resultSlots[index].textContent = randomSymbol;
                    }
                    if (spins > maxSpins - 2 && index === 1) {
                        resultSlots[index].textContent = randomSymbol;
                    }
                    if (spins > maxSpins - 1 && index === 2) {
                        resultSlots[index].textContent = randomSymbol;
                    }
                });

                spins++;
                if (spins >= maxSpins) {
                    clearInterval(spinInterval);
                    finishSlotSpin(betAmount);
                }
            }, 100);
        });

        function finishSlotSpin(betAmount) {
            const resultSlots = [
                document.getElementById('result-slot1'),
                document.getElementById('result-slot2'),
                document.getElementById('result-slot3')
            ];

            // Get final results
            const results = [];
            resultSlots.forEach(slot => {
                const randomIndex = Math.floor(Math.random() * symbols.length);
                const symbol = symbols[randomIndex];
                slot.textContent = symbol;
                results.push(symbol);
            });

            // Check for wins
            const resultMessage = document.getElementById('result-message');

            if (results[0] === results[1] && results[1] === results[2]) {
                // All three match
                const symbolIndex = symbols.indexOf(results[0]);
                const multiplier = multipliers[symbolIndex];
                const winAmount = betAmount * multiplier;

                balance += winAmount;
                resultMessage.innerHTML = `<span class="text-[#5ffc3f]">Jackpot! You won ${winAmount} coins!</span>`;

                // Animate the win
                animateBalanceChange(winAmount);

                // Confetti effect
                createConfetti();
            } else if (results[0] === results[1] || results[1] === results[2]) {
                // Two match
                balance += betAmount;
                resultMessage.innerHTML = `<span class="text-[#ffc0cb]">You won back your ${betAmount} coins!</span>`;
                animateBalanceChange(betAmount);
            } else {
                resultMessage.innerHTML = '<span class="text-gray-600">No win this time. Try again!</span>';
            }

            // Update UI
            localStorage.setItem('casinoBalance', balance);
            document.getElementById('balance').textContent = balance;
            document.getElementById('user-score').textContent = balance;

            const spinBtn = document.getElementById('spin-btn');
            spinBtn.disabled = false;
            spinBtn.innerHTML = `<i class="fas fa-spinner mr-2"></i> Spin (Cost: ${betAmount})`;

            // Auto-hide result after 3 seconds
            setTimeout(() => {
                document.getElementById('slot-result').classList.add('hidden');
            }, 3000);
        }

        // Blackjack game
        let blackjackDeck = [];
        let playerHand = [];
        let dealerHand = [];
        let currentBlackjackBet = 0;

        function createDeck() {
            const deck = [];
            const values = Object.keys(cardValues);

            for (let i = 0; i < 6; i++) { // 6 decks
                for (const value of values) {
                    for (const suit of cardSuits) {
                        deck.push({ value, suit });
                    }
                }
            }

            // Shuffle the deck
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }

            return deck;
        }

        function dealCard(hand, isDealer = false, hidden = false) {
            if (blackjackDeck.length === 0) {
                blackjackDeck = createDeck();
            }

            const card = blackjackDeck.pop();
            hand.push(card);

            const handContainer = isDealer ?
                document.getElementById('dealer-hand') :
                document.getElementById('player-hand');

            if (!hidden) {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${card.suit === '♥' || card.suit === '♦' ? 'red' : 'black'}`;
                cardElement.textContent = `${card.value}${card.suit}`;
                handContainer.appendChild(cardElement);
            } else {
                const cardElement = document.createElement('div');
                cardElement.className = 'card card-back';
                cardElement.textContent = '?';
                handContainer.appendChild(cardElement);
            }

            return card;
        }

        function calculateHandValue(hand) {
            let value = 0;
            let aces = 0;

            for (const card of hand) {
                value += cardValues[card.value];
                if (card.value === 'A') aces++;
            }

            // Adjust for aces
            while (value > 21 && aces > 0) {
                value -= 10;
                aces--;
            }

            return value;
        }

        function endBlackjackGame(result) {
            const messageElement = document.getElementById('blackjack-message');
            const resultElement = document.getElementById('blackjack-result');

            // Reveal dealer's hidden card
            document.getElementById('dealer-hand').innerHTML = '';
            dealerHand.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${card.suit === '♥' || card.suit === '♦' ? 'red' : 'black'}`;
                cardElement.textContent = `${card.value}${card.suit}`;
                document.getElementById('dealer-hand').appendChild(cardElement);
            });

            const dealerValue = calculateHandValue(dealerHand);
            const playerValue = calculateHandValue(playerHand);

            if (result === 'win') {
                const winAmount = currentBlackjackBet * 2;
                balance += winAmount;
                messageElement.innerHTML = `<span class="text-[#5ffc3f]">You win! +${winAmount} coins (${playerValue} vs ${dealerValue})</span>`;
                animateBalanceChange(winAmount);
            } else if (result === 'push') {
                balance += currentBlackjackBet;
                messageElement.innerHTML = `<span class="text-[#ffc0cb]">Push! You get your ${currentBlackjackBet} coins back (${playerValue} vs ${dealerValue})</span>`;
                animateBalanceChange(currentBlackjackBet);
            } else {
                messageElement.innerHTML = `<span class="text-gray-600">You lose! -${currentBlackjackBet} coins (${playerValue} vs ${dealerValue})</span>`;
            }

            localStorage.setItem('casinoBalance', balance);
            document.getElementById('balance').textContent = balance;
            document.getElementById('user-score').textContent = balance;

            resultElement.classList.remove('hidden');

            // Enable deal button
            document.getElementById('deal-btn').disabled = false;
            document.getElementById('hit-btn').disabled = true;
            document.getElementById('stand-btn').disabled = true;
        }

        document.getElementById('deal-btn').addEventListener('click', () => {
            const betAmount = parseInt(document.getElementById('blackjack-bet').value) || 10;

            if (betAmount < 1) {
                showNotification('Bet amount must be at least 1', 'error');
                return;
            }

            if (balance < betAmount) {
                showNotification('Not enough coins', 'error');
                return;
            }

            // Deduct bet amount
            balance -= betAmount;
            currentBlackjackBet = betAmount;
            localStorage.setItem('casinoBalance', balance);
            document.getElementById('balance').textContent = balance;
            document.getElementById('user-score').textContent = balance;

            // Clear previous hands
            document.getElementById('dealer-hand').innerHTML = '';
            document.getElementById('player-hand').innerHTML = '';
            document.getElementById('blackjack-result').classList.add('hidden');
            playerHand = [];
            dealerHand = [];

            // Create new deck if needed
            if (blackjackDeck.length < 20) {
                blackjackDeck = createDeck();
            }

            // Deal initial cards
            dealCard(playerHand);
            dealCard(dealerHand, true, true); // Dealer's hidden card
            dealCard(playerHand);
            dealCard(dealerHand);

            // Check for blackjack
            const playerValue = calculateHandValue(playerHand);
            if (playerValue === 21) {
                // Player has blackjack, check dealer
                const dealerValue = calculateHandValue(dealerHand);
                if (dealerValue === 21) {
                    endBlackjackGame('push');
                } else {
                    const winAmount = Math.floor(currentBlackjackBet * 2.5);
                    balance += winAmount;
                    endBlackjackGame('win');
                }
                return;
            }

            // Enable hit/stand buttons
            document.getElementById('hit-btn').disabled = false;
            document.getElementById('stand-btn').disabled = false;
            document.getElementById('deal-btn').disabled = true;
        });

        document.getElementById('hit-btn').addEventListener('click', () => {
            dealCard(playerHand);

            const playerValue = calculateHandValue(playerHand);
            if (playerValue > 21) {
                endBlackjackGame('lose');
            }
        });

        document.getElementById('stand-btn').addEventListener('click', () => {
            // Reveal dealer's hidden card
            document.getElementById('dealer-hand').innerHTML = '';
            dealerHand.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${card.suit === '♥' || card.suit === '♦' ? 'red' : 'black'}`;
                cardElement.textContent = `${card.value}${card.suit}`;
                document.getElementById('dealer-hand').appendChild(cardElement);
            });

            // Dealer draws until 17 or higher
            let dealerValue = calculateHandValue(dealerHand);
            while (dealerValue < 17) {
                const card = dealCard(dealerHand, true);
                dealerValue = calculateHandValue(dealerHand);
            }

            const playerValue = calculateHandValue(playerHand);

            if (dealerValue > 21 || playerValue > dealerValue) {
                endBlackjackGame('win');
            } else if (playerValue === dealerValue) {
                endBlackjackGame('push');
            } else {
                endBlackjackGame('lose');
            }
        });

        // Dice game
        document.getElementById('roll-dice-btn').addEventListener('click', () => {
            const betAmount = parseInt(document.getElementById('dice-bet').value) || 10;

            if (betAmount < 1) {
                showNotification('Bet amount must be at least 1', 'error');
                return;
            }

            if (balance < betAmount) {
                showNotification('Not enough coins', 'error');
                return;
            }

            // Deduct bet amount
            balance -= betAmount;
            localStorage.setItem('casinoBalance', balance);
            document.getElementById('balance').textContent = balance;
            document.getElementById('user-score').textContent = balance;

            // Disable button during roll
            const rollBtn = document.getElementById('roll-dice-btn');
            rollBtn.disabled = true;
            rollBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Rolling...';

            // Show rolling animation
            const playerDice = document.getElementById('player-dice');
            const computerDice = document.getElementById('computer-dice');
            const resultElement = document.getElementById('dice-result');

            playerDice.textContent = '?';
            computerDice.textContent = '?';
            resultElement.classList.add('hidden');

            // Add shake animation
            playerDice.classList.add('shake');
            computerDice.classList.add('shake');

            setTimeout(() => {
                // Remove shake animation
                playerDice.classList.remove('shake');
                computerDice.classList.remove('shake');

                // Roll dice
                const playerRoll = Math.floor(Math.random() * 6) + 1;
                const computerRoll = Math.floor(Math.random() * 6) + 1;

                playerDice.textContent = getDiceFace(playerRoll);
                computerDice.textContent = getDiceFace(computerRoll);

                const messageElement = document.getElementById('dice-message');

                if (playerRoll > computerRoll) {
                    const winAmount = betAmount * 2;
                    balance += winAmount;
                    messageElement.innerHTML = `<span class="text-[#5ffc3f]">You win! +${winAmount} coins (${playerRoll} vs ${computerRoll})</span>`;
                    animateBalanceChange(winAmount);
                } else if (playerRoll === computerRoll) {
                    balance += betAmount;
                    messageElement.innerHTML = `<span class="text-[#ffc0cb]">Tie! You get your ${betAmount} coins back (${playerRoll} vs ${computerRoll})</span>`;
                    animateBalanceChange(betAmount);
                } else {
                    messageElement.innerHTML = `<span class="text-gray-600">You lose! -${betAmount} coins (${playerRoll} vs ${computerRoll})</span>`;
                }

                localStorage.setItem('casinoBalance', balance);
                document.getElementById('balance').textContent = balance;
                document.getElementById('user-score').textContent = balance;

                resultElement.classList.remove('hidden');

                // Enable button
                rollBtn.disabled = false;
                rollBtn.innerHTML = '<i class="fas fa-dice mr-2"></i> Roll Dice';
            }, 1000);
        });

        function getDiceFace(number) {
            switch(number) {
                case 1: return '⚀';
                case 2: return '⚁';
                case 3: return '⚂';
                case 4: return '⚃';
                case 5: return '⚄';
                case 6: return '⚅';
                default: return '?';
            }
        }

        function animateBalanceChange(amount) {
            const balanceElement = document.getElementById('balance');
            balanceElement.classList.add('animate-pulse');
            balanceElement.style.transform = 'scale(1.2)';

            setTimeout(() => {
                balanceElement.style.transform = 'scale(1)';
                balanceElement.classList.remove('animate-pulse');
            }, 500);
        }

        function createConfetti() {
            const colors = ['#5ffc3f', '#ffc0cb', '#ffffff', '#4ce0d2'];

            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.position = 'fixed';
                    confetti.style.top = '-10px';
                    confetti.style.zIndex = '1000';
                    confetti.style.borderRadius = '50%';
                    document.body.appendChild(confetti);

                    const animation = confetti.animate([
                        { top: '-10px', opacity: 1 },
                        { top: '100vh', opacity: 0 }
                    ], {
                        duration: Math.random() * 3000 + 2000,
                        easing: 'cubic-bezier(0.1, 0.8, 0.3, 1)'
                    });

                    animation.onfinish = () => {
                        confetti.remove();
                    };
                }, Math.random() * 500);
            }
        }

        // Notification system
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 fade-in ${
                type === 'error' ? 'bg-[#ffc0cb] text-[#080a00]' : 'bg-[#5ffc3f] text-[#080a00]'
            }`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('opacity-0', 'transition-opacity', 'duration-300');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }

        // Quick link button styling
        document.querySelectorAll('.quick-link-btn').forEach(btn => {
            btn.className = 'flex items-center justify-center p-3 bg-[#f0f0f0] rounded-lg hover:bg-[#ffc0cb] transition-colors';
        });

        // Game tab button styling
        document.querySelectorAll('.game-tab-btn').forEach(btn => {
            btn.className = 'flex items-center justify-center p-1 rounded-lg transition-colors';
        });

        // Helper functions
        function getWeekStart(date) {
            const day = date.getDay();
            const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is Sunday
            return new Date(date.setDate(diff));
        }

        function formatDate(date) {
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function formatDateKey(date) {
            return date.toISOString().split('T')[0];
        }

        function isSameDay(date1, date2) {
            return date1.getFullYear() === date2.getFullYear() &&
                date1.getMonth() === date2.getMonth() &&
                date1.getDate() === date2.getDate();
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        // Initialize the app with the first tab
        switchTab(1);

        // Update next bonus time every minute
        setInterval(updateNextBonusTime, 60000);
    }
</script>
</body>
</html>